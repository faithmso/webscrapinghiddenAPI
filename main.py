import requests
import pandas as pd


url = "https://www.sunglasshut.com/wcs/resources/plp/10152/byCategoryId/3074457345626651836"

res = []
for x in range(1,12):
  querystring =    {"isProductNeeded":"true","isChanelCategory":"false","pageSize":"100","responseFormat":"json","currency":"USD","viewTaskName":"CategoryDisplayView","storeId":"10152","DM_PersistentCookieCreated":"true","pageView":"image","catalogId":"20602","top":"Y","beginIndex":"0","langId":"-1","categoryId":"3074457345626651836","orderBy":"default","currentPage":f"{x}"}


  headers = {
    "cookie": "bm_sz=AA3BB6815EC3E91BF7A35750D44306E0~YAAQHUM0FwyGIxiFAQAAdBa2nxL0itGwFiqbsKqqFkh0GGPCcHHfZtGIrsBxF2InQYwjAea1FoC98/hN2vSjnESAxLDgetrUZhqhV2RI2ZT0vc+5RIagXGDYY8mgiNlX/ahbqaiBdPj17zbMOYr9XmnSrLmCxtiZiOQ8KfgiYk3CBaqj/PjDP7o47lRcukoxTZp/pw5zQDJ3yRYkoM8nsnx6PJlGwAfoKfnLkJGLhRPFt+KYLPATc78PcoLgg+PKe8s+rRQZgqdi+tp5odoyUm72Kc8t9fkUyADuJNwyFNqIU5v2EMna0A==~4469561~3556148; mt.v=2.118535127.1673421846673; rxVisitor=1673421852823UOVLCU89ONT9TD5M7TRSG1JCGC1SK1BB; sgh-desktop-facet-state-search=; ak_bmsc=23B0A5DA8C8270DCB3031CE995563225~000000000000000000000000000000~YAAQHUM0F5GGIxiFAQAAIC22nxKc8cQI197i/V+6ekNuKF3TjNnbtSyg6Qnm6T4mghT4dOq10zVIHmokJn/cgiawO/YwdeB3wokQR4BKAOwPMe2T5GJE3RDxM8fldw2Il3zyc74rEG/92VPAv0a5u35bqGMnMKDX5BBaitUL1Kxc1B8XjkmHwG2EYFs9b5vUFhpqYa5NsazdlSQPwZrexdrRdstjUpZEXw3XZbhihsabKP5uElCRJnMb5Epxt6ut8dq3UB3c73qOv7Ai1a0wy9xclL+r5/X/0AESUpk/pJYp3qtCkrKnKDJAgOMg+O0AyNFpQZhJaL0WPZ7AK/vW9imsWN+1PVT244J28bBuvjAjSx7PHvSo/BXwS3EkGLGg4C0FN+dJOzR3LN/UIktT5+cLjMB+lCoNcXVvmHyAozMoRQkeLpY9oz/2L5K4B/CKOM2VEwPqcm7rCKtVKUWRNb9Qq2HM3Od31UGmkTZ0lGbsFr3rxlt+pKWY7Y+ES3jxSA==; _abck=7D5F7417D23C03D0C918DB86161B94C7~0~YAAQHUM0F5qGIxiFAQAARC62nwlb35ofxaidBGrEXWYeoJGtQWO2a0g6+JQ3omkWoNVxdmW5xMk9/Vf8v+au74StfiAVxbFgC6PxEQPCz4pRe3Sk+tf7P0uUfmlseoqQGVDnM8kb981xa+IFsxdP9ZCCCAaF8wqQyEo6QW9r2Q/oVGbB8g5ha6163SKpcneIzMSkEpBfT7ngkfXsmAXSpyLI/dGiWY24gxyOQEu9oX8c9XyRTsSanXYOaTxbObfLeH7Go7vGe7hk53CsZhLInjH4BLXBYtKxj3LEXJ63u0qmc0XKLzwALauov7k5f82bXmHI6IxvGZjZS+2e8+MKPNi71Te0NR9JceD8UgAleR9SHfL8nRVuPTtpa7Iw5DC3QqwnR0M+0TNoTwYplA4jE4JYfugHueul6KQ8jNA=~-1~||-1||~-1; ftr_ncd=6; __wid=896487352; tealium_data2track_Tags_AdobeAnalytics_TrafficSourceMid_ThisHit=google.com/; tealium_data_tags_adobeAnalytics_trafficSourceMid_thisSession=google.com/; tealium_data_session_timeStamp=1673421849695; userToken=undefined; TrafficSource_Override=1; tiktok_click_id=undefined; AMCVS_125138B3527845350A490D4C%40AdobeOrg=1; s_ecid=MCMID%7C21332853120589121244003719415163013925; AMCV_125138B3527845350A490D4C%40AdobeOrg=-1303530583%7CMCIDTS%7C19369%7CMCMID%7C21332853120589121244003719415163013925%7CMCAAMLH-1674026650%7C6%7CMCAAMB-1674026650%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1673429050s%7CNONE%7CMCAID%7CNONE%7CvVersion%7C3.3.0; s_cc=true; dtCookie=v_4_srv_1_sn_IV4CT0T54TN9SFQQE2C85GQF0O8SPK0R_app-3Ab359c07662f0b428_0_ol_0_perc_100000_mul_1; CONSENTMGR=consent:true%7Cts:1673421854750; _cs_c=1; __utmc=110589831; _gcl_au=1.1.1010599364.1673421856; SGPF=CT-2; _scid=7e1cad9c-5267-4943-aca9-6ed671c65f9c; _ga=GA1.1.636686499.1673421864; _pin_unauth=dWlkPU5XRTBNVEZpTURndFpHWTRZUzAwTWpVeExUaGpaVEV0WkRGaU1qY3hPRFEyTldJeA; _tt_enable_cookie=1; _ttp=Nv0yIs5-hGbkb3b0wyp1H3-X0am; _fbp=fb.1.1673421864567.1528611330; _sctr=1|1673384400000; hasVisitedPLP=true; recentlyViewedUS=3074457345618491678; JSESSIONID=0000JfeNdq0gAZiTYr8RGppfvRV:1c7qtpec2; UserTrackingProducts=1; aka-cc=KE; aka-ct=NAIROBI; aka-zp=; dtLatC=167; __utma=110589831.1292284970.1673421856.1673421856.1673425379.2; __utmz=110589831.1673425379.2.2.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided); __utmt=1; _cs_mk=0.8236029291660827_1673425378858; outbrain_cid_fetch=true; TS011f624f=015966d29283ef6c103f7f511ed2bae505d814dcb1680bbe833fdaca705a60544cb6c33deea55e652868227b108af0b0af1b1e0f39b4b2f09a5d02b2c64efe1aa28c72d293; dtSa=true%7CC%7C-1%7CWomen%7C-%7C1673425435746%7C25382366_845%7Chttps%3A%2F%2Fwww.sunglasshut.com%2Fus%2Fsunglasses%2F50-anniversary%7C%7C%7C%7C; rxvt=1673427235983|1673425382373; dtPC=1$25438791_350h1vEPOHQHVCUKWNOHNIBCAFOCIONHPJKAKL-0e0; sgh-desktop-facet-state-plp=categoryid:undefined|gender:true|brands:partial|polarized:true|price:true|frame-shape:partial|color:true|face-shape:false|fit:false|materials:false|lens-treatment:false; forterToken=087db89355434ec881484cd31a90c009_1673425433893__UDF43_6; tealium_data2track_Tags_AdobeAnalytics_TrafficSourceJid_ThisHit=301116REF; tealium_data_tags_adobeAnalytics_trafficSourceJid_stackingInSession=301111ORG-301112REF-301113REF-301114REF-301115ORG-301116REF; bounceClientVisit5415v=N4IgNgDiBcIBYBcEQM4FIDMBBNAmAYnvgO6kB0KArgHYDmYAhiinJQmQMYD2AtkZegJU6jZgFNB+AKwAGALQNq1AJYA3MQCcUDDQE8QAGhAaYIUsTK0uXemM69DIZSgD6VlygkplXajABmDGCeRs5uEB5ePn7QgcFiAL5AA; s_sq=%5B%5BB%5D%5D; __utmb=110589831.2.10.1673425379; _cs_cvars=%7B%221%22%3A%5B%22Page%20Type%22%2C%22Plp%22%5D%2C%222%22%3A%5B%22Page%20Name%22%2C%22Women%3ASun%3APlp%22%5D%2C%223%22%3A%5B%22Page%20Section%201%22%2C%22Women%22%5D%2C%224%22%3A%5B%22Action%22%2C%22Women%3ASun%3APlp%22%5D%2C%225%22%3A%5B%22Products%20Id%22%2C%22805289114567%2C8056597243612%2C8056597663588%2C8053672947397%2C8056597646673%2C8053672611649%2C8056597744218%2C805289439899%2C8056597627443%2C889652048123%2C8056597727945%2C8053672054682%2C8056597753623%2C8056597726894%2C8056597752329%2C8056597625685%2C679420489230%2C8056597529662%22%5D%2C%226%22%3A%5B%22Products%20Category%22%2C%22SUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%2CSUN%22%5D%2C%227%22%3A%5B%22Products%20Price%22%2C%22213%2C343%2C198%2C345%2C317%2C163%2C405%2C163%2C475%2C224%2C335%2C163%2C433%2C308%2C439%2C475%2C329%2C178%22%5D%2C%228%22%3A%5B%22User%20Login%20Status%22%2C%22Guest%22%5D%7D; _cs_id=ac81a796-2e87-a259-9516-4e5136db0385.1673421855.2.1673425437.1673423854.1.1707585855404; _cs_s=4.0.0.1673427237594; _uetsid=f88522b0918011edbfa141c93520cae5; _uetvid=f8855070918011eda681f93cc6e6e49e; MGX_UC=JTdCJTIyTUdYX1AlMjIlM0ElN0IlMjJ2JTIyJTNBJTIyODE5MzZkODItZWEwNy00ZDhiLWIyNDYtYmI2ZjM1MmRhMTY2JTIyJTJDJTIyZSUyMiUzQTE2NzM5NTEwMzc0MTIlN0QlMkMlMjJNR1hfQ0lEJTIyJTNBJTdCJTIydiUyMiUzQSUyMjk2ZjlhZTk1LTI3ODMtNGZkNC1hZGViLWFjYWUwNTg5MjBkMyUyMiUyQyUyMmUlMjIlM0ExNjczOTUxMDM3NDEzJTdEJTJDJTIyTUdYX1BYJTIyJTNBJTdCJTIydiUyMiUzQSUyMjk1Y2U1YmUzLTZlYTgtNDZjNi05YmNiLWU1MTAyNzI0Yzk2YyUyMiUyQyUyMnMlMjIlM0F0cnVlJTJDJTIyZSUyMiUzQTE2NzM0MjcyMzgwMjclN0QlMkMlMjJNR1hfVlMlMjIlM0ElN0IlMjJ2JTIyJTNBMiUyQyUyMnMlMjIlM0F0cnVlJTJDJTIyZSUyMiUzQTE2NzM0MjcyMzgwMjclN0QlMkMlMjJNR1hfRUlEJTIyJTNBJTdCJTIydiUyMiUzQSUyMm5zX3NlZ18wMDAlMjIlMkMlMjJzJTIyJTNBdHJ1ZSUyQyUyMmUlMjIlM0ExNjczNDI3MjM4MDI3JTdEJTdE; cto_bundle=mcUWJF9lcWtFUE9zcThFejZ6bVBNTk9WTEhHOW1nOGZNeENsWk5EZEtWR3dpandKQkMlMkJMUHp1QUxwSnA0WGF2N2dUa2hEUWNXMEFwTVJJYUQ3cEhNY0N0T0ducEFJTiUyRlVXZUR0cEN0UzNRUVpHU3VxZXB0QVRHOHFwZXBMQ2w0Y2UlMkJzMTZlaG82TlZxaXNXbzZUNWt2SUklMkZPZ3ZHejNGeTEwQ3VCbXBCd0ZaeXBoZyUzRA; bm_sv=273B36CD7EFA03406A86370D25E42581~YAAQHUM0F3LSJBiFAQAAQgLtnxJjyiqLyi4Kp8ZIbEIrpClX95jXFqnnl/zmYEg3Oi+fxt910ZN2tS1ZgwCydfOlIZChGBXVS1Bi74IeTv/FulaOdv0HVMCoYI5lyZhsFWtBlJX1vWdK1X410dZuJks4W6zO1COpD8u3mPqTLAS35hzenO6dg+C4ZVFe2rr2IWcNrG6J1B39r/ln067kb1+EGQa5RIuxvIN6pvFxKewiEVYv7Rgbx5JFB2jEiBhFDBygb79g~1; _ga_6P80B86QTY=GS1.1.1673421863.1.1.1673425464.60.0.0; utag_main=v_id:01859fb7044e00026543a7550c620506f003806700bd0$_sn:2$_se:5$_ss:0$_st:1673427269965$vapi_domain:sunglasshut.com$dc_visit:2$ses_id:1673425378405%3Bexp-session$_pn:2%3Bexp-session$dc_event:2%3Bexp-session$dc_region:eu-central-1%3Bexp-session",
    "authority": "www.sunglasshut.com",
    "accept": "application/json, text/plain, */*",
    "accept-language": "en-US,en;q=0.9",
    "referer": "https://www.sunglasshut.com/us/womens-sunglasses",
    "sec-ch-ua-mobile": "?0",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36"
}


  r = requests.request("GET", url, headers=headers, params=querystring)

  data = r.json()
  for p in data['plpView']['products']['products']['product']:
    res.append(p)

df = pd.json_normalize(res)
df.to_csv('firstresults.csv')